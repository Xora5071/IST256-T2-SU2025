<!DOCTYPE html>
<html lang="en" ng-app="storefrontApp" ng-controller="BillingReturnController">
<head>
    <meta charset="utf-8" />
    <title>Billing Details & Handle Returns</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap for styling -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/billingdetails.css" />
</head>

<body>

<h2>Billing Details & Returns</h2>

<!-- Main Form Container for Billing and Returns -->
<form name="billingReturnForm" ng-submit="submitReturn()" novalidate>

    <!-- Shopper Information Fields -->
    <label for="shopperId">Shopper ID</label>
    <input type="text" id="shopperId" ng-model="shopperId" required />

    <label for="reason">Reason for Return</label>
    <textarea id="reason" ng-model="reason" required></textarea>

    <!-- Card Details Section -->
    <label>Payment Method</label>
    <div class="card-details">
        <input type="text" placeholder="Card Number" required />
        <input type="text" placeholder="MM/YY" required />
        <input type="text" placeholder="CVC" required />
    </div>

    <!-- Return Cart Display -->
    <h4>Items to Return:</h4>
    <ul ng-if="returnCart.length > 0">
        <li ng-repeat="item in returnCart">{{ item.productName }} - ${{ item.originalPrice | number:2 }}</li>
    </ul>
    <p ng-if="returnCart.length === 0">No items added to return cart yet.</p>

    <!-- Return Type Selection -->
    <div class="return-section">
        <label for="returnType">Return Type</label>
        <select id="returnType" ng-model="returnType" required>
            <option value="">Select Type</option>
            <option value="refund">Refund</option>
            <option value="exchange">Exchange</option>
        </select>
    </div>

    <!-- Submit Button for the Return Form -->
    <button type="submit">Process Return</button>

    <!-- Success Message -->
    <div id="successMessage" class="success-message" style="display: none;">

    </div>

    <!-- Refund Details Display -->
    <div ng-if="refundDetails.status" class="success-message">
        Return Processed! Confirmation ID: {{ refundDetails.confirmationID }}
    </div>

</form>

<hr class="my-5">

<!-- Product Search and Add to Return Cart Section -->
<div class="product-search-section">
    <h3>Search Products for Return</h3>
    <input type="text" id="searchBox" placeholder="Search by product name or ID" class="form-control mb-3" />
    <div id="productResults">
    </div>
</div>

<!-- AngularJS CDN for storefrontApp module and controllers -->
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
<!-- jQuery CDN for product search and DOM manipulation) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<!-- Bootstrap JS bundle for interactive components) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
<!-- AngularJS logic for billing/returns and AJAX transport -->
<script src="js/billingdetails.js"></script>
<!-- jQuery logic for searching the product document collection -->
<script src="js/billingdetailsserver.js"></script>

</body>
</html>